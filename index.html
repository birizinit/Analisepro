<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Indicador Kyvoo</title>
  <link rel="stylesheet" href="app.css" />
</head>
<body>
  <div class="app-container">
    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
      <div class="sidebar-header">
        <div class="logo-section">
        <!--  <img src="icons/icon-48.svg" alt="logo" class="logo-img" /> -->
          <div class="logo-text">
            <h1>Indicador Kyvoo</h1>
            <p>An√°lise Profissional</p>
          </div>
        </div>
        <button class="toggle-btn" id="toggleSidebar">
          <span id="toggleIcon">‚Üê</span>
        </button>
      </div>

      <div class="sidebar-content">
        <!-- Signal Generator -->
        <section class="section">
          <h2>Analise Grafica</h2>
          <button id="generateBtn" class="primary-btn">
            <span id="generateIcon"></span>
            <span id="generateText">Analisar Graficos</span>
          </button>
        </section>

        <!-- Bank Management -->
        <section class="section">
          <h3>Gest√£o de Banca</h3>
          <label>Banca (R$)
            <input id="bankroll" type="number" value="1000" min="1" />
          </label>

          <div class="two-col">
            <label>Total Ops
              <input id="totalOps" type="number" value="6" min="1" />
            </label>
            <label>Acertos
              <input id="expectedWins" type="number" value="4" min="0" />
            </label>
          </div>

          <label>Payout
            <input id="payout" type="number" step="0.1" value="1.9" min="1" />
          </label>

          <label>Modo de Stake
            <select id="stakeMode">
              <option value="percent">% da Banca</option>
              <option value="fixed">Valor Fixo</option>
            </select>
          </label>

          <label id="stakeValueLabel">Percentual (%)
            <input id="stakeValue" type="number" step="0.1" value="1" min="0.1" />
          </label>

          <button id="saveSettingsBtn" class="outline-btn">
            Salvar Configura√ß√µes
          </button>
        </section>

        <!-- Projection -->
        <section class="section">
          <h3>Proje√ß√£o de Resultados</h3>

          <div class="info-box">
            <p class="label">Saldo Atual</p>
            <p id="bankrollDisplay" class="value">R$ 1.000,00</p>
          </div>

          <div id="projectedBox" class="info-box projected">
            <p class="label">Saldo Projetado</p>
            <p id="projectedBalance" class="value">R$ 0,00</p>
            <p id="projectedReturn" class="sublabel">0%</p>
          </div>

          <div class="stats-grid">
            <div class="stat-item">
              <p class="label">Losses Permitidos</p>
              <p id="allowedLosses" class="stat-value">0</p>
            </div>
            <div class="stat-item">
              <p class="label">Taxa de Acerto</p>
              <p id="winRate" class="stat-value">0%</p>
            </div>
          </div>

          <div id="realProfitBox" class="info-box hidden">
            <p class="label">Lucro Real Atual</p>
            <p id="realProfit" class="value">R$ 0,00</p>
          </div>
        </section>

        <!-- Operations Checklist -->
        <section class="section">
          <div class="section-header">
            <h3>Checklist de Opera√ß√µes</h3>
            <button id="resetBtn" class="outline-btn-small">Resetar</button>
          </div>

          <div id="operations" class="ops-list"></div>

          <div class="ops-footer">
            <div class="ops-stat">
              <p class="label">Wins</p>
              <p id="winsCount" class="stat-value">0</p>
            </div>
            <div class="ops-stat">
              <p class="label">Losses</p>
              <p id="lossesCount" class="stat-value">0</p>
            </div>
            <div class="ops-stat">
              <p class="label">Pendentes</p>
              <p id="pendingCount" class="stat-value">0</p>
            </div>
          </div>
        </section>

        <!-- Admin Panel and Logout Buttons -->
        <section class="section">
          <button id="adminPanelBtn" class="outline-btn" onclick="window.location.href='admin.html'" style="display: none;">
            ‚öôÔ∏è Painel Administrativo
          </button>
          <button id="logoutBtn" class="outline-btn" style="margin-top: 8px;">
            üö™ Sair
          </button>
        </section>
      </div>
    </aside>

    <!-- Main Content Area with iframe -->
    <main class="main-content">
      <iframe 
        src="https://www.kyvoo.io/" 
        class="trading-iframe"
        title="Trading Platform"
        frameborder="0"
        allowfullscreen
      ></iframe>
    </main>
  </div>

  <!-- Loading Overlay -->
  <div id="loadingOverlay" class="overlay hidden">
    <div class="overlay-card">
      <div class="spinner"></div>
      <h3>Processando An√°lise</h3>
      <p id="loadingMessage">Analisando gr√°ficos...</p>
    </div>
  </div>

  <!-- Signal Modal -->
  <div id="signalModal" class="modal hidden">
    <div class="modal-card">
      <button id="closeModal" class="close-btn">‚úï</button>
      <h3>Sinal Identificado!</h3>
      <p class="modal-subtitle">Oportunidade de entrada detectada</p>

      <div class="signal-info">
        <div>
          <p class="label">Par</p>
          <p id="signalAsset" class="value">BTC/USDT</p>
        </div>
        <div class="text-right">
          <p class="label">Confian√ßa</p>
          <p id="signalConfidence" class="value">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</p>
        </div>
      </div>

      <div class="signal-type-container">
        <span id="signalType" class="signal-badge call">CALL</span>
      </div>

      <div class="confluence-info">
        <span class="label">Conflu√™ncias:</span>
        <span id="confluenceCount" class="value">5/7</span>
      </div>

      <p id="signalTimestamp" class="timestamp"></p>

      <h4>An√°lises Realizadas</h4>
      <div id="signalAnalyses" class="analyses"></div>

      <div class="warning-box">
        <strong>Aten√ß√£o:</strong> Este sinal √© baseado em an√°lise t√©cnica real da Binance e n√£o garante lucro. Opere com responsabilidade.
      </div>

      <button id="ackBtn" class="primary-btn">Entendi, vamos operar!</button>
    </div>
  </div>

  <!-- No Signal Modal -->
  <div id="noSignalModal" class="modal hidden">
    <div class="modal-card">
      <button id="closeNoSignalModal" class="close-btn">‚úï</button>
      <h3>Nenhum Sinal Seguro</h3>
      <p class="modal-subtitle">Aguarde melhores condi√ß√µes de mercado</p>

      <div class="confluence-info">
        <span class="label">Conflu√™ncias detectadas:</span>
        <span id="noSignalConfluences" class="value">2/7</span>
      </div>

      <h4>An√°lises Realizadas</h4>
      <div id="noSignalAnalyses" class="analyses"></div>

      <button id="ackNoSignalBtn" class="primary-btn">Entendi</button>
    </div>
  </div>

  <!-- Confirmation Modal -->
  <div id="confirmModal" class="modal hidden">
    <div class="modal-card confirm-card">
      <h3>Confirma√ß√£o</h3>
      <p id="confirmMessage" class="modal-subtitle"></p>
      <div class="modal-actions">
        <button id="confirmNo" class="outline-btn">Cancelar</button>
        <button id="confirmYes" class="primary-btn">Confirmar</button>
      </div>
    </div>
  </div>

  <script src="technical-indicators.js"></script>
  <script src="binance-api.js"></script>
  <script src="api-client.js"></script>
  <script src="app.js"></script>
</body>
</html>
